@page "/Account/Login"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Authentication
@using Microsoft.AspNetCore.Identity
@using ReMindHealth.Data
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager
@inject ILogger<Login> Logger
@inject NavigationManager NavigationManager
<PageTitle>Anmelden</PageTitle>

<div class="auth-container">
    <div class="auth-card">
        <h1>Anmelden</h1>
        <p class="subtitle">Willkommen zurück!</p>

        @if (!string.IsNullOrEmpty(errorMessage))
        {
            <div class="alert alert-danger">
                @errorMessage
            </div>
        }

        <EditForm Model="Input" method="post" OnValidSubmit="LoginUser" FormName="login" >
            <DataAnnotationsValidator />
            <ValidationSummary class="text-danger" role="alert" />

            <div class="form-group">
                <label for="email">E-Mail</label>
                <InputText @bind-Value="Input.Email" class="form-control" autocomplete="username" aria-required="true" placeholder="name@example.com" />
                <ValidationMessage For="() => Input.Email" class="text-danger" />
            </div>

            <div class="form-group">
                <label for="password">Passwort</label>
                <InputText type="password" @bind-Value="Input.Password" class="form-control" autocomplete="current-password" aria-required="true" placeholder="Passwort" />
                <ValidationMessage For="() => Input.Password" class="text-danger" />
            </div>

            <div class="form-check">
                <InputCheckbox @bind-Value="Input.RememberMe" class="form-check-input" />
                <label class="form-check-label">
                    Angemeldet bleiben
                </label>
            </div>

            <button type="submit" class="btn-submit" disabled="@isSubmitting">
                @if (isSubmitting)
                {
                    <span>Wird angemeldet...</span>
                }
                else
                {
                    <span>Anmelden</span>
                }
            </button>
        </EditForm>

        <div class="auth-footer">
            <p>
                Noch kein Konto?
                <a href="/Account/Register">Jetzt registrieren</a>
            </p>
        </div>
    </div>
</div>

